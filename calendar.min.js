(function(a){function b(){var a=this,b,c,d,e,f,g,h,i,j,k={},l,m,n,o,p,q,r,s,t=0,u="click",v="noAnimationEnd",w=typeof Modernizr!="undefined"&&Modernizr.csstransforms3d?"webkit moz o ms khtml ".split(" ").join("AnimationEnd ")+"animationEnd":v,x="startDate",y="endDate",z="multipleDates",A=function(a,b){for(var c=0,d=b.length;c<d;c++)if(a&&b[c]&&a.getTime()===b[c].getTime())return c;return-1},B=function(a,c){c&&c.clearTime&&c.clearTime();if(a==z){var d=!1;if(c===null)k=[];else{var e=A(c,k);if(e!==-1)k.splice(e,1);else{if(s!==null&&k.length>=~~s)return!1;k.push(c),d=!0}}b.data(a.toLowerCase(),JSON.stringify(k)).trigger(a+"Changed",{dates:k,changedDate:c}).trigger(a+(d?"Added":"Removed"),{dates:k,changedDate:c})}else a==x?i=c:j=c,b.data(a.toLowerCase(),c?c.toString():""),b.trigger(a+"Changed");F()},C=function(a){a.preventDefault();var b=$(this);if(b.hasClass("inactive")||b.text().length==0)return;var c=new Date(l.getFullYear(),l.getMonth(),parseInt(b.text()));if(q){B(x,!i||c.getTime()!=i.getTime()?c:null);return}if(r){B(z,c);return}i?j?b.hasClass(x)?B(x,null):b.hasClass(y)?B(y,null):(B(x,null),B(y,null)):i<c?B(y,c):c<i?(B(y,i),B(x,c)):B(x,null):j?c<j?B(x,c):j<c?(B(x,j),B(y,c)):B(y,null):B(x,c)},D=function(){Date.prototype.clone=function(){return new Date(this.getTime())},Date.prototype.isLeapYear=function(){var a=this.getFullYear();return a%4===0&&a%100!==0||a%400===0},Date.prototype.getDaysInMonth=function(){return[31,this.isLeapYear(this.getFullYear())?29:28,31,30,31,30,31,31,30,31,30,31][this.getMonth()]},Date.prototype.moveToFirstDayOfMonth=function(){return this.setDate(1),this},Date.prototype.moveToLastDayOfMonth=function(){return this.setDate(this.getDaysInMonth()),this},Date.prototype.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},Date.prototype.addDays=function(a){return this.addMilliseconds(a*864e5)},Date.prototype.addMonths=function(a){var b=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+a),this.setDate(Math.min(b,this.getDaysInMonth())),this},Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this}},E=function(a){return(a+t)%7},F=function(){g.removeClass(x).removeClass(y).removeClass(z).removeClass("betweenDates");var a=l.clone().moveToFirstDayOfMonth(),b=l.clone().moveToLastDayOfMonth(),c=E(a.getDay())-1;if(!!i&&!!j&&i<b&&j>a){var d=new Date(Math.max(a,i.clone().addDays(1))),e=new Date(Math.min(b,j.clone().addDays(-1)));d<=e&&g.slice(c+d.getDate(),c+e.getDate()+1).addClass("betweenDates")}!!i&&a<=i&&i<=b&&g.eq(c+i.getDate()).addClass(x),!!j&&a<=j&&j<=b&&g.eq(c+j.getDate()).addClass(y);for(var f in k)!!k[f]&&a<=k[f]&&k[f]<=b&&g.eq(c+k[f].getDate()).addClass(z)};a.ready=function(A){b=A,c=$('<a href="#">&lt;</a>'),d=$('<a href="#">&gt;</a>'),e=$('<li class="calMonth"></li>'),b.append($('<ul class="calButtonBar"></ul>').append($('<li class="calPrevious"></li>').append(c)).append(e).append($('<li class="calNext"></li>').append(d)));for(var E=0,F="",G="";E<7;E++)F+="<th></th>",G+='<td><a href="#"></a></td>';for(var E=0,H="";E<6;E++)H+="<tr>"+G+"</tr>";b.append('<div class="calGrid"><table><tr>'+F+"</tr>"+H+"</table></div>"),f=b.find("th"),g=b.find("td a"),h=b.find("tr"),h.eq(1).addClass("first"),q=b.hasClass("jsSingleDate"),r=b.hasClass("jsMultipleDates"),s=b.data("multipledates-max")||null,t=b.data("firstdayofweek")||t,b.get(0).calendar=a,$.fn&&($.fn.slice=$.fn.slice||function(a,b){return $([].slice.call(this,a,b))},$.fn.calendar=function(){return this.get(0).calendar}),D(),m=(new Date).clearTime(),n=b.data("mindate")?(new Date(b.data("mindate"))).clearTime():m,o=b.data("maxdate")?b.data("maxdate").trim()=="today"?m:(new Date(b.data("maxdate"))).clearTime():!1,i=b.data("startdate"),i=i?(new Date(i)).clearTime():null,j=b.data("enddate"),j=j?(new Date(j)).clearTime():null,k=b.data("multipledates"),typeof k=="string"&&(k=JSON.parse(k));for(var E in k)k[E]=(new Date(k[E])).clearTime();l=(i||(k?k[0]:!1)||m).clone(),p=b.data("localized_date"),typeof p=="string"&&(p=JSON.parse(p));var I=b.find(".calGrid"),J=[],K=function(a){return I.children().length>1?(J.push(a),!0):!1},L=function(){J.length>0&&setTimeout(function(){J.shift().trigger(u)},0)};c.bind(u,function(d){d.preventDefault();if(K(c))return;l=l.addMonths(-1);var e=$("<table>"+b.find("table").html()+"</table>");I.append(e),g.closest("table").addClass("turndown").bind(w,function(a){$(this).removeClass("turndown").unbind(w),e.remove(),L()}).trigger(v),a.showMonth(l)}),d.bind(u,function(c){c.preventDefault();if(K(d))return;l=l.addMonths(1);var e=$('<table class="turnup">'+b.find("table").html()+"</table>");I.append(e),e.bind(w,function(a){e.remove(),L()}).trigger(v),a.showMonth(l)}),b.bind("resetDates",function(a){B(x,null),B(y,null),r&&B(z,null)}),g.bind(u,C),a.showMonth(l)},a.setDates=function(a,b){if(r){a=a&&a.constructor===Array?a:[a];for(var c=0,d=a.length;c<d;c++)B(z,a[c])}else B(x,a&&b?new Date(Math.min(a,b)):a),!q&&B(y,a&&b?a.getTime()!=b.getTime()?new Date(Math.max(a,b)):null:b)},a.showMonth=function(a){if(!!p){e.text(p.months.names["long"][a.getMonth()]+" "+a.getFullYear());for(var b=0,c=f.length;b<c;b++)f.eq(E(b)).text(p.days.names.min[b])}var d=n>a.clone().moveToLastDayOfMonth(),i=o?o<a.clone().moveToFirstDayOfMonth():!1,j=n.clone().moveToFirstDayOfMonth()-a.clone().moveToFirstDayOfMonth()===0,k=o?o.clone().moveToFirstDayOfMonth()-a.clone().moveToFirstDayOfMonth()===0:!1,l=m.clone().moveToFirstDayOfMonth()-a.clone().moveToFirstDayOfMonth()===0,q=n.getDate(),r=o&&o.getDate();g.addClass("noTransition").removeClass("inactive"),h.removeClass("last").removeClass("hidden");for(var s=E(a.clone().moveToFirstDayOfMonth().getDay())-1,t=s+a.clone().moveToLastDayOfMonth().getDate(),b=0,c=g.length;b<c;b++){var u=b>s&&b<=t,v=g.eq(b).text(u?""+(b-s):"");v.toggleClass("noDate",!u),v.toggleClass("inactive",u&&(d||j&&b-s<q||i||k&&b-s>r)),v.toggleClass("today",l&&m.getDate()==b-s),b==t&&v.closest("tr").addClass("last").next().addClass("hidden").next().addClass("hidden")}setTimeout(function(){g.removeClass("noTransition")},0),F()}}document=a.document,$(document).ready(function(){var a=$(".jsCalendar");for(var c=0,d=a.length;c<d;c++){var e=new b;e.ready(a.eq(c))}}),a.Calendar=a.Calendar||b})(window);